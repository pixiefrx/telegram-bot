import logging
from aiogram import Bot, Dispatcher, executor, types

API_TOKEN = "8269631267:AAF5uqkFK10QMpY3BXIFYaG0hENZ243Stwo"

logging.basicConfig(level=logging.INFO)

bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

# –ö–æ–º–∞–Ω–¥–∞ /start
@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    button = types.KeyboardButton("–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º üì±", request_contact=True)
    keyboard.add(button)
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –æ–±–µ—â–∞–µ–º –º—ã –Ω–µ –±—É–¥–µ–º —Ç–µ–±–µ –∑–≤–æ–Ω–∏—Ç—å",
        reply_markup=keyboard
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
@dp.message_handler(content_types=['contact'])
async def contact_handler(message: types.Message):
    if message.contact:
        phone = message.contact.phone_number
        user_id = message.from_user.id
        username = message.from_user.username

        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ (—Ç—É—Ç –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å)
        print(f"–ù–æ–º–µ—Ä: {phone}, ID: {user_id}, username: {username}")

        await message.answer("–°–ø–∞—Å–∏–±–æ! –ù–æ–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω ‚úÖ")

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
